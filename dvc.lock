schema: '2.0'
stages:
  data_ingestion:
    cmd:
    - python3 src/data_ingestion.py
    deps:
    - path: src/data_ingestion.py
      hash: md5
      md5: 8bf5b7b8852690f831e9ffbb0c53bef2
      size: 5512
    params:
      params.yaml:
        data_ingestion.data_url: 
          https://raw.githubusercontent.com/sarveshmhadgut/DSBDAL-Coursework/main/datasets/spam.csv
        data_ingestion.random_state: 42
        data_ingestion.raw_data_dirpath: ./data/raw
        data_ingestion.test_size: 0.2
    outs:
    - path: data/raw
      hash: md5
      md5: 38512cbc18c77ebfdc493e1c44be218b.dir
      size: 479272
      nfiles: 2
  data_preprocessing:
    cmd:
    - python3 src/data_preprocessing.py
    deps:
    - path: data/raw
      hash: md5
      md5: 38512cbc18c77ebfdc493e1c44be218b.dir
      size: 479272
      nfiles: 2
    - path: src/data_preprocessing.py
      hash: md5
      md5: 0c204aa26bce8b4614a58ec5e65f9f56
      size: 8242
    params:
      params.yaml:
        data_preprocessing.preprocessed_data_dirpath: ./data/preprocessed/
        data_preprocessing.raw_data_dirpath: ./data/raw/
        data_preprocessing.target_col: target
        data_preprocessing.text_col: text
    outs:
    - path: data/preprocessed
      hash: md5
      md5: 5b79c08d37330d3cee0b0ff1c132055d.dir
      size: 256622
      nfiles: 2
  feature_engineering:
    cmd:
    - python3 src/feature_engineering.py
    deps:
    - path: data/preprocessed
      hash: md5
      md5: 5b79c08d37330d3cee0b0ff1c132055d.dir
      size: 256622
      nfiles: 2
    - path: src/feature_engineering.py
      hash: md5
      md5: 65561dabe1a2511700043fbb5bdc13e4
      size: 7049
    params:
      params.yaml:
        feature_engineering.max_features: 150
        feature_engineering.preprocessed_data_dirpath: ./data/preprocessed/
        feature_engineering.tfidf_data_dirpath: ./data/tfidf/
    outs:
    - path: data/tfidf
      hash: md5
      md5: 3395a635e7cea29e4ccf14c44da2c952.dir
      size: 3416396
      nfiles: 2
  model_training:
    cmd:
    - python3 src/model_training.py
    deps:
    - path: data/tfidf
      hash: md5
      md5: 3395a635e7cea29e4ccf14c44da2c952.dir
      size: 3416396
      nfiles: 2
    - path: src/model_training.py
      hash: md5
      md5: bf073b3be27632eb4627845158a997b7
      size: 5847
    params:
      params.yaml:
        model_training.model_filepath: ./models/model.pkl
        model_training.n_estimators: 150
        model_training.random_state: 42
        model_training.train_data_filepath: ./data/tfidf/tfidf_train.csv
    outs:
    - path: models/model.pkl
      hash: md5
      md5: 5eb3d4ec2aee0934e9795be938b97b54
      size: 9216021
  model_evaluation:
    cmd:
    - python3 src/model_evaluation.py
    deps:
    - path: models/model.pkl
      hash: md5
      md5: 5eb3d4ec2aee0934e9795be938b97b54
      size: 9216021
    - path: src/model_evaluation.py
      hash: md5
      md5: d53fd12d9596bf0c935bc3613c0ee289
      size: 8392
    params:
      params.yaml:
        model_evaluation.metrics_dirpath: ./reports/
        model_evaluation.model_filepath: ./models/model.pkl
        model_evaluation.test_data_path: ./data/tfidf/tfidf_test.csv
    outs:
    - path: reports/
      hash: md5
      md5: e8ac012e686b7698eeb8d7ad2ebb23ba.dir
      size: 325
      nfiles: 2
